<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--  <script data-main="js/config" src="js/require.js"></script> -->
    <script src="js/lib/jquery.min.js"></script>
    <script src="js/lib/handlebars.js"></script>
    <script src="js/lib/underscore.js"></script>
    <script src="js/lib/backbone.js"></script>
    
</head>

<body>
    <!-- <script>
        require(['config'], function () {
            require(['customScript/jqueryFile']);
        });
    </script> -->
    <!-- <div id="content"></div> -->

    <!-- <script type="text/template" id="eventTemplate">
        <button id="btnClick">Click me</button>
    </script> -->

    <!--  <script type="text/template" id="my-template">
        <% if(id > 5) { %> 
            <%= name %>
        <% }else { %>    
            <%= author%>
        <% } %>
    </script> -->
    <script>
        /* $(document).ready(function () {
            const EventsView = Backbone.View.extend({
                el : "#content",
                events : {
                    'click button#btnClick' : 'OnClick'
                },
                OnClick : function () { 
                    const a = 10;
                    const b = 20;
                    alert("Sum of " + a + " and " + b + " is equals to " + (a+b));
                 },
                template: _.template($("#eventTemplate").html()),
                initialize: function() {
                    this.render();
                },
                render: function() {
                    this.$el.html(this.template());
                    return this;
                }
            });

            const eventview = new EventsView();
            
        }); */




        /*   const firstModel = Backbone.Model.extend({
              initialize : function(){
                 // console.log("hello model");
              }
          });
  
          const fmodel = new firstModel({
              name:"jasmin",
              author: "jasmin",
              anchor:"jasmin"
          }); */

        /*   fmodel.set({
              name:"jasmin",
              author: "jasmin",
              anchor:"jasmin"
          });  */

        //  console.log(fmodel.toJSON());

        //   console.log(fmodel.get("name"));


        /*   const modelView = Backbone.View.extend({
              model : fmodel,
              initialize: function() {
                  this.render();
              },
              render: function() {
                  console.log(this.model.toJSON());
                  console.log(this.model.get("name"));
              }
          });
  
          const mview = new modelView();
              
           */

       /*  const model = Backbone.Model.extend();

        const modelObj = new model({
            id: 2,
            name: "jasmin",
            author: "backbone"
        }); */

       /*  const modelView = Backbone.View.extend({
            el: "#content",
            template: _.template($("#my-template").html()),
            model: modelObj,
            initialize: function () {
                this.render();
            },
            render: function () {
                this.$el.html(this.template(this.model.toJSON()));
            }
        });

        const mview = new modelView(); */

    </script>



    <!-- <script>

        const modelEvent = Backbone.Model.extend({

            defaults : {
                name: "default name",
                author : "default author"
            },
            initialize: function () {
                // console.log("constractor");
            }
        });

        const evntModel = new modelEvent({
            name: "<p>jasmin</p>"
        });


        const eventView = Backbone.View.extend({
            model: evntModel,
            initialize: function () {
                this.render();
            },
            render: function () {

                /*  console.log(this.model.escape("name"));
                 console.log(this.model.get("name"));
                 console.log(this.model.has("name")); */
                //console.log(this.model.unset("name"));
               // this.model.clear();
                console.log(this.model.toJSON());
            }
        });

        const evntView = new eventView();
    </script>
 -->
<!-- 
    <script>
        const modelValid = Backbone.Model.extend({
            initialize: function () {},
            validate:function(attr){
                if(attr.age > 30){
                    return "you age is not appropriate for cricket now";
                }
                if (!attr.name) {
                    return "name is needed";
                }
            }
        });

            const modelObj = new modelValid({
                name: "",
                team: "cricket",
                age : 30
            });


        const validView = Backbone.View.extend({
            model: modelObj,
            initialize: function () {
                this.render();
            },
            render: function () {
               // console.log(this.model.toJSON());
                
                if(this.model.isValid()){
                    console.log("this model is valid");
                }else{
                    console.log(this.model.validationError);
                }
                
            }
        });

        const viewObj = new validView();
    </script>
 -->

    <!-- 
    <script>
        const myModel = Backbone.Model.extend({
            initialize: function () {
               /*  this.bind("change:name", function(model){
                    console.log("model changed");
                }); */
            }
        });

        const modelObj = new myModel({
            name:"jasmin",
            team:"cricket",
            age:30
        });

        const cloneModel = modelObj.clone();

        const myView = Backbone.View.extend({
            model : cloneModel,
            initialize: function() {
                this.render();
            },
            render: function() {
              /*   this.model.on("change" , function () {
                    console.log("model change detected");
                }); */

                /* this.model.bind("change:age", function(model){
                    console.log("age changed");
                }); */

              /*   cloneModel.set({
                    name:"justin",
                    age:35
                });
 */
               /*  if(cloneModel.hasChanged()){
                    console.log(cloneModel.previous("name"));
                    console.log(cloneModel.previousAttributes());
                    console.log(cloneModel.changedAttributes());
                }else{
                    console.log("model not changed");
                }
                console.log(this.model.toJSON()); */
                this.listenTo(this.model, 'change', this.modelChange);
            },

            modelChange: function() {
                console.log("model changed");
                console.log(this.model.changedAttributes());
            }
        });

        const viewObj = new myView();

    </script> -->

   <!--  <div id="content"></div>

    <script type="text/template" id="tmp-player">
        <% _.each(collection, function(model) { %>
            Name: <%= model.name %>
            team: <%= model.team %>
            no: <%= model.no %>
        <% }) %>
    </script>

    <script>
        
            const player = Backbone.Model.extend({
                defaults:{
                    name:"jasmin",
                    team:"india",
                    no:10
                }    
            });

            const player1 = new player({
                name:"dhoni",
                team:"india",
                no:20
            });

            const player2 = new player({
                name:"kohli",
                team:"india",
                no:30
            });

            const player3 = new player({
                name:"rohit",
                team:"india",
                no:40
            });


            const myCollection = Backbone.Collection.extend({
                model : player    
            });

            const myCollectionObj = new myCollection([player1,player2,player3]);
            
           // myCollectionObj.add([player1,player2]);
            //myCollectionObj.add(player2);

            //myCollectionObj.unshift([player1,player2]);
            //myCollectionObj.unshift(player1);
            //myCollectionObj.unshift(player2);
            
            //myCollectionObj.push([player1,player2]);
            //myCollectionObj.push(player1);
            //myCollectionObj.push(player2);

            //console.log(myCollectionObj.toJSON());

            const myView = Backbone.View.extend({
                //el:"#content",
                //template: _.template($("#tmp-player").html()),
                collection: myCollectionObj,
                initialize: function() {
                    this.render();
                },
                render: function() {
                   // console.log(this.collection.toJSON());

                    // _.each 

                      _.each(this.collection.toJSON(),function (model) {
                       // console.log(model.name);
                    });

                    // _.where (return all array whose no is 20)

                    const playerObj = _.where(this.collection.toJSON(), {no : 20}) 
                    //console.log(playerObj);

                    // _.findWhere (return only first record whose no is 20)

                    const playerObj1 = _.findWhere(this.collection.toJSON(), {no : 20}) 
                    //console.log(playerObj1);


                    // _.find (return only first record whose no is greater than 20)

                    const playerObj2 = _.find(this.collection.toJSON(), function (model) {
                        if(model.no > 20){
                            return model.name;
                        }
                      });

                    // _.filter (return all array whose no is greater than 20)

                    const playerObj3 = _.filter(this.collection.toJSON(), function (model) {
                        if(model.no > 20){
                            return model.name;
                        }
                      });

                      //console.log(playerObj3);

                      // _.pluck (return all the value of given key)

                    const playerObj4 = _.pluck(this.collection.toJSON(), "name") 
                    console.log(playerObj4);

                   /*  this.$el.html(this.template({
                        collection: this.collection.toJSON()
                    })); */
                }
            });
    
            const myViewObj = new myView();
    </script>
 -->
<!-- 
 <div id="content"></div>
        <ul>
            <li><a href="#/view2/10">View 2</a></li>
            <li><a href="#/view3/10/jasmin">View 3</a></li>
        </ul>
 <script>
 
    const view1 = Backbone.View.extend({
        el: '#content',
        initialize: function() {
            this.render();
        },
        render: function() {
            this.$el.html("this is view1");
        }
    });


    const view2 = Backbone.View.extend({
        el: '#content',
        initialize: function() {
            this.render();
        },
        render: function() {
            this.$el.html("this is view2");
        }
    });



    const view3 = Backbone.View.extend({
        el: '#content',
        initialize: function() {
            this.render();
        },
        render: function() {
            this.$el.html("this is view3");
        }
    });


    const myRouter = Backbone.Router.extend({
        routes:{
            "" : "showView1",
            "view2/:id" : "showView2",
            "view3/:id/:msg" : "showView3"

        },

        showView1: function () {
            const viewObj1 = new view1();
        },

        showView2: function (id) {
            console.log(id);
            const viewObj2 = new view2();
        },

        showView3: function (id, msg) {
            console.log(id + " and " + msg);
            const viewObj3 = new view3();
        }
    });

    const routerObj = new myRouter();
    
    Backbone.history.start();
 </script> -->

    <div id="content"></div>

    <script type="text/x-handlebars-template" id="tmp-handlbars">
        {{#each data}}
            {{this.name}} and {{this.team}}   
        {{/each}}
    </script>

    <script>
    
            const player = Backbone.Model.extend({
                defaults:{
                    name:"jasmin",
                    team:"india",
                    no:10
                }
            });

            const player1 = new player({
                name:"dhoni",
                team:"india",
                no:20
            });

            const player2 = new player({
                name:"kohli",
                team:"india",
                no:30
            });

            const myCollection = Backbone.Collection.extend({
                model:player
            });

            const myCollectionObj = new myCollection([player1,player2]);

            const myview = Backbone.View.extend({
                el: '#content',
                model : player2,
                collection : myCollectionObj,
                template : Handlebars.compile($("#tmp-handlbars").html()),
                initialize: function() {
                    this.render();
                },
                render: function() {
                    this.$el.html(this.template({
                        data : myCollectionObj.toJSON()
                    }));
                }
            });

            const viewObj = new myview();
    </script>
</body>

</html>